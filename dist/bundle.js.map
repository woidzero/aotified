{
  "version": 3,
  "sources": ["../src/core/plugins.ts", "../src/core/observer.ts", "../src/core/logger.ts", "../src/core/patcher.ts", "../node_modules/@popperjs/core/lib/enums.js", "../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindow.js", "../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js", "../node_modules/@popperjs/core/lib/modifiers/applyStyles.js", "../node_modules/@popperjs/core/lib/utils/getBasePlacement.js", "../node_modules/@popperjs/core/lib/utils/math.js", "../node_modules/@popperjs/core/lib/utils/userAgent.js", "../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js", "../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js", "../node_modules/@popperjs/core/lib/dom-utils/contains.js", "../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js", "../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js", "../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js", "../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js", "../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js", "../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js", "../node_modules/@popperjs/core/lib/utils/within.js", "../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js", "../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js", "../node_modules/@popperjs/core/lib/utils/expandToHashMap.js", "../node_modules/@popperjs/core/lib/modifiers/arrow.js", "../node_modules/@popperjs/core/lib/utils/getVariation.js", "../node_modules/@popperjs/core/lib/modifiers/computeStyles.js", "../node_modules/@popperjs/core/lib/modifiers/eventListeners.js", "../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js", "../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js", "../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js", "../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js", "../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js", "../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js", "../node_modules/@popperjs/core/lib/utils/rectToClientRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js", "../node_modules/@popperjs/core/lib/utils/computeOffsets.js", "../node_modules/@popperjs/core/lib/utils/detectOverflow.js", "../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js", "../node_modules/@popperjs/core/lib/modifiers/flip.js", "../node_modules/@popperjs/core/lib/modifiers/hide.js", "../node_modules/@popperjs/core/lib/modifiers/offset.js", "../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js", "../node_modules/@popperjs/core/lib/utils/getAltAxis.js", "../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js", "../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js", "../node_modules/@popperjs/core/lib/utils/orderModifiers.js", "../node_modules/@popperjs/core/lib/utils/debounce.js", "../node_modules/@popperjs/core/lib/utils/mergeByName.js", "../node_modules/@popperjs/core/lib/createPopper.js", "../node_modules/@popperjs/core/lib/popper.js", "../src/core/bootstrap.ts", "../src/core/settings.ts", "../src/core/composer.ts", "../src/utils/dom.ts", "../src/utils/utils.ts", "../src/utils/sort.ts", "../src/modules/global.ts", "../node_modules/preact/src/constants.js", "../node_modules/preact/src/util.js", "../node_modules/preact/src/options.js", "../node_modules/preact/src/create-element.js", "../node_modules/preact/src/component.js", "../node_modules/preact/src/diff/props.js", "../node_modules/preact/src/create-context.js", "../node_modules/preact/src/diff/children.js", "../node_modules/preact/src/diff/index.js", "../node_modules/preact/src/render.js", "../node_modules/preact/src/clone-element.js", "../node_modules/preact/src/diff/catch-error.js", "../node_modules/preact-render-to-string/src/lib/constants.js", "../node_modules/preact-render-to-string/src/lib/util.js", "../node_modules/preact-render-to-string/src/index.js", "../node_modules/preact/jsx-runtime/src/utils.js", "../node_modules/preact/src/constants.js", "../node_modules/preact/jsx-runtime/src/index.js", "../src/components/Overlay.tsx", "../src/modules/album.ts", "../src/modules/artist.ts", "../src/modules/user.ts", "../src/modules/images.ts", "../src/main.ts"],
  "sourcesContent": ["// @ts-ignore\nconst $: JQueryStatic = window.$ || window.JQuery;\n\nif (!$) {\n  throw new Error(\"[aotified] jQuery not found on window\");\n}\n\ndeclare global {\n  interface JQuery {\n    wrapChildren(childSelector: string, wrapper: string): JQuery;\n    wrapSmart(wrapper: JQuery | (() => JQuery)): JQuery;\n    changeTag(tag: string): JQuery;\n    unpack(): JQuery;\n    replaceClass(from: string | string[], to?: string | string[]): JQuery;\n  }\n}\n\n$.fn.wrapChildren = function (childSelector: string, wrapper: string) {\n  return this.each(function () {\n    $(this).children(childSelector).wrapAll(wrapper);\n  });\n};\n\n$.fn.wrapSmart = function (wrapper: JQuery | (() => JQuery)) {\n  return this.each(function () {\n    const $w = typeof wrapper === \"function\" ? wrapper() : wrapper.clone();\n    $(this).before($w);\n    $w.append(this);\n  });\n};\n\n$.fn.unpack = function () {\n  return this.each(function () {\n    const $this = $(this);\n    $this.replaceWith($this.contents());\n  });\n};\n\n$.fn.changeTag = function (tag: string): JQuery {\n  tag = tag.replace(/[<>]/g, \"\");\n\n  return this.map(function () {\n    const oldEl = this as HTMLElement;\n    const $old = $(oldEl);\n\n    const newEl = document.createElement(tag);\n\n    for (const attr of Array.from(oldEl.attributes)) {\n      newEl.setAttribute(attr.name, attr.value);\n    }\n\n    $(newEl).append($old.contents());\n    oldEl.replaceWith(newEl);\n\n    return newEl;\n  });\n};\n\n$.fn.replaceClass = function (\n  from?: string | string[],\n  to?: string | string[]\n): JQuery {\n  const fromList = from ? (Array.isArray(from) ? from : [from]) : [];\n  const toList = to ? (Array.isArray(to) ? to : [to]) : [];\n\n  return this.each(function () {\n    const $el = $(this);\n\n    if (fromList.length) {\n      $el.removeClass(fromList.join(\" \"));\n    }\n\n    if (from === \"*\") {\n      $el.removeAttr(\"class\");\n    }\n\n    if (toList.length) {\n      $el.addClass(toList.join(\" \"));\n    }\n  });\n};\n\nexport {};\n", "export function Observer<T extends JQuery = JQuery>(\n  selector: string,\n  callback: (this: T) => void | Promise<void>,\n  {\n    root = document,\n    idle = false,\n    intersection = false,\n    intersectionOptions,\n    live = false, // \u043D\u043E\u0432\u044B\u0439 \u043F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\n  }: ObserveOptions & { live?: boolean } = {}\n) {\n  const processed = live ? null : new WeakSet<Element>();\n\n  const getRootEl = (): ParentNode =>\n    (root as JQuery)?.[0] ?? (root as ParentNode);\n\n  const run = (el: Element) => {\n    if (!live && processed?.has(el)) return;\n    if (!live) processed?.add(el);\n\n    const $el = $(el) as T;\n\n    const exec = () => callback.call($el);\n\n    if (idle && \"requestIdleCallback\" in window) {\n      requestIdleCallback(exec);\n    } else {\n      exec();\n    }\n  };\n\n  const io =\n    intersection && \"IntersectionObserver\" in window\n      ? new IntersectionObserver((entries) => {\n          for (const e of entries) {\n            if (!e.isIntersecting) continue;\n            run(e.target);\n            io!.unobserve(e.target);\n          }\n        }, intersectionOptions)\n      : null;\n\n  const handle = (el: Element) => {\n    if (io) {\n      io.observe(el);\n    } else {\n      run(el);\n    }\n  };\n\n  $(getRootEl())\n    .find(selector)\n    .each((_, el) => handle(el));\n\n  /**\n   * mutation observer\n   */\n  const observer = new MutationObserver((mutations) => {\n    for (const m of mutations) {\n      for (let i = 0; i < m.addedNodes.length; i++) {\n        const node = m.addedNodes[i];\n        if (!(node instanceof Element)) continue;\n\n        if (node.matches(selector)) handle(node);\n\n        node.querySelectorAll?.(selector).forEach((el) => handle(el));\n\n        if (node.parentElement?.matches(selector)) handle(node.parentElement);\n      }\n    }\n  });\n\n  observer.observe(getRootEl(), {\n    childList: true,\n    subtree: true,\n  });\n\n  const stop = () => {\n    observer.disconnect();\n    io?.disconnect();\n  };\n\n  return stop;\n}\n", "export class Logger implements TLogger {\n  scope: string;\n  clear: boolean;\n  style?: string;\n\n  constructor(scope: string, clear: boolean = false, style?: string) {\n    this.scope = scope;\n    this.clear = clear;\n    this.style = style;\n\n    if (this.clear) console.clear();\n  }\n\n  formatArgs(args: any[], color: string) {\n    return [\n      `%c[${this.scope}]:`,\n      `color: ${color}; font-weight: bold;`,\n      ...args,\n    ];\n  }\n\n  log(...args: any[]) {\n    console.log(...this.formatArgs(args, \"white\"));\n  }\n\n  info(...args: any[]) {\n    console.info(...this.formatArgs(args, \"#2196F3\"));\n  }\n\n  debug(...args: any[]) {\n    console.debug(...this.formatArgs(args, \"gray\"));\n  }\n\n  warn(...args: any[]) {\n    console.warn(...this.formatArgs(args, \"orange\"));\n  }\n\n  error(...args: any[]) {\n    console.error(...this.formatArgs(args, \"red\"));\n  }\n}\n", "$(\"#sortDrop\").on(\"click\", \".criticSort\", function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const $btn = $(this);\n    if (this.disabled) return;\n\n    const $li = $btn.closest(\"li\");\n    const sort = $btn.attr(\"sort\");\n\n    $(\"#sortDrop li\").removeAttr(\"class\")\n        .find(\"button\").prop(\"disabled\", false);\n\n    $li.addClass(\"current\");\n    $btn.prop(\"disabled\", true);\n\n    const $reviews = $(\"#criticReviewContainer .albumReviewRow\");\n\n    const sorted = $reviews.get().sort((a, b) => {\n        const $a = $(a), $b = $(b);\n        const dateAStr = $a.find(\".albumReviewLinks .actionContainer:has(.date)\").attr(\"title\");\n        const dateBStr = $b.find(\".albumReviewLinks .actionContainer:has(.date)\").attr(\"title\");\n        const dateA: number = dateAStr ? Number(new Date(dateAStr)) : 0;\n        const dateB: number = dateBStr ? Number(new Date(dateBStr)) : 0;\n\n        if (sort === \"highest\") {\n            return parseInt($b.find(\".albumReviewRating\").text()) - parseInt($a.find(\".albumReviewRating\").text());\n        }\n        if (sort === \"lowest\") {\n            return parseInt($a.find(\".albumReviewRating\").text()) - parseInt($b.find(\".albumReviewRating\").text());\n        }\n        if (sort === \"newest\") {\n            return dateB - dateA;\n        }\n        if (sort === \"oldest\") {\n            return dateA - dateB;\n        }\n        return 0;\n    });\n\n    $(\"#criticReviewContainer\").empty().append(sorted);\n});\n", "export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];", "export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}", "export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}", "import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };", "import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};", "import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}", "export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;", "export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}", "import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}", "import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}", "import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}", "import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}", "import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}", "import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}", "import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}", "import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}", "export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}", "import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}", "export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}", "import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}", "export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};", "export default function getVariation(placement) {\n  return placement.split('-')[1];\n}", "import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};", "import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};", "var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}", "var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}", "import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}", "import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}", "import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}", "import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}", "import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}", "import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}", "export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}", "import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}", "import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}", "import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}", "import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}", "import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases \u2013 research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};", "import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};", "import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};", "export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}", "import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};", "export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}", "import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}", "import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}", "export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}", "export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}", "import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update \u2013 it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update \u2013 it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };", "import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";", "import { Observer } from \"../core/observer\";\nimport { Logger } from \"../core/logger\";\n\nimport \"./patcher\";\n\nconst log = new Logger(\"aotified.bootstrap\")\n\n/* -------------------------\n  DOM BOOTSTRAP\n  runs before all the modules\n------------------------- */\nlog.debug(\"initializing\");\n\n/* -------------------------\n  globals\n------------------------- */\nconst $body = $(\"body\");\nconst $header = $(\"#header\");\nconst $nav = $(\"#nav\");\nconst $centerContent = $(\"#centerContent\");\nconst $footer = $(\".footer\");\nconst $overlay = $(\".overlay\")\n\nlog.debug(\"elements found: \", [$body, $header, $nav, $centerContent, $footer, $overlay])\n\n$header.changeTag(\"header\");\n$nav.changeTag(\"nav\");\n\n/* -------------------------\n  dom cleaner\n------------------------- */\n$(\".clear, .adSpacer, noscript\").remove();\n$(\"header, nav\").wrapAll(\"<div class='pageTop'></div>\");\n\nObserver(\"body\", function () {\n  const $root = $(this)\n  $root.addClass(\"aotified\")\n  $root.children(\"br\").remove()\n\n  $root.contents()\n    .filter(function () {\n      return this.nodeType === 8;\n    })\n    .remove();\n}, { live: true })\n\n/* -------------------------\n  page context\n------------------------- */\nconst path = location.pathname;\n\n(function pageContext() {\n  const rules: { regex: RegExp; className: string }[] = [\n    { regex: /album\\/\\d+-/, className: \"album\" },\n    { regex: /artist\\/\\d+-/, className: \"artist\" },\n    { regex: /user\\/\\d+-/, className: \"user\" },\n  ];\n\n  rules.forEach(({ regex, className }) => {\n    if (regex.test(path)) {\n      $(\"#centerContent\").addClass(className);\n      log.debug(`page context: ${className}`);\n    }\n  });\n})();\n\n/* -------------------------\n  footer unpack\n------------------------- */\n$footer.children(\".footerContent\").replaceClass(\"*\", \"footer\")\n$footer.unpack();\n\n/* -------------------------\n  remove score from rating texts\n------------------------- */\nObserver(\".ratingText\", function () {\n  $(this).text(function (_, text) {\n    return text.replace(\" score\", \"\");\n  });\n});\n\n/* -------------------------\n  album output no results\n------------------------- */\nObserver(\n  \"#albumOutput\",\n  function () {\n    const $root = $(this);\n\n    if (\n      $root.children().length === 1 &&\n      $root.children(\".adTagWide\").length === 1\n    ) {\n      $root.append(\"<div class='noResults'>No Releases</div>\");\n    }\n  },\n  { once: true }\n);\n\n/* -------------------------\n  facets fixes\n------------------------- */\nObserver(\n  \"#facets\",\n  function () {\n    const $container = $(this);\n    let $currentItem: JQuery | null = null;\n\n    $container.children().each(function () {\n      const $el = $(this);\n      if ($el.hasClass(\"facetItem\")) return;\n\n      if ($el.hasClass(\"center\")) {\n        $el.addClass(\"facetButton\").removeClass(\"center\");\n        return;\n      }\n\n      if ($el.hasClass(\"facetTitle\")) {\n        $currentItem = $(\"<div class='facetItem'>\");\n        $el.before($currentItem);\n        $currentItem.append($el);\n        return;\n      }\n\n      if ($currentItem && $el.hasClass(\"facet\")) {\n        $currentItem.append($el);\n      }\n    });\n  },\n  { once: true }\n);\n\n/* -------------------------\n  hero normalization\n------------------------- */\n$(\"#centerContent.album .fullWidth\").replaceClass(\"*\", \"albumHeader\")\n\n$(\".artistHeader, .albumHeader\").each(function () {\n  const $root = $(this);\n  const $infoBox = $root.find(\".artistTopBox.info, .albumTopBox.info\");\n\n  if ($infoBox.length) {\n    const $detailBlock = $(\"<div class='detailsBlock'>\");\n    const $detailRow = $infoBox.children(\".detailRow\");\n    $detailRow.wrapAll($detailBlock);\n\n    const $tagBlock = $(\"<div class='tagBlock'>\");\n    $infoBox\n      .find(\".detailRow\")\n      .filter(function () {\n        return $(this).text().trim() === \"Tags\";\n      })\n      .remove();\n\n    $infoBox.children(\".tag\").wrapAll($tagBlock);\n  }\n\n  if ($root.is(\".artistHeader\")) {\n    $root.attr(\"id\", \"artist\");\n\n    const $headline = $root.children(\".artistHeadline\").replaceClass(\"*\", \"Hero_headline\");\n    const $imageBox = $root.children(\".artistImage\");\n    const $topBox = $root.children(\".artistTopBox\").not(\".info\").addClass(\"ratings\");\n    const $infoBox = $root.children(\".artistTopBox.info\");\n\n    const $artistCover = $(\"<div class='Hero__cover'>\");\n    const $artistDetails = $(\"<div class='Hero__details'>\");\n    const $artistBoxes = $(\"<div class='Hero__boxes'>\");\n\n    $imageBox.appendTo($artistCover);\n    $artistBoxes.append($topBox, $infoBox);\n    $artistDetails.append($headline, $artistBoxes);\n\n    $root.empty().append(\n      $artistCover,\n      $artistDetails\n    );\n  } else if ($root.is(\".albumHeader\")) {\n    $root.attr(\"id\", \"album\");\n\n    const $albumCover = $root.children(\".albumTopBox.cover\");\n    const $albumBoxInfo = $root.children(\".albumTopBox.info\");\n    const $albumBoxRating = $albumCover.next(\".albumTopBox\").addClass(\"ratings\");\n\n    const $albumHeadline = $root.children(\".albumHeadline\").replaceClass(\"*\", \"Hero__headline\");\n\n    const $albumDetails = $(\"<div class='Hero__details'>\");\n    const $albumBoxes = $(\"<div class='Hero__boxes'>\");\n\n    const $selectRow = $root.children(\".selectRow\");\n    const $wideLeft = $root.parent().find(\".wideLeft\");\n    const $linksSection = $(\"<div class='section' id='links'></div>\");\n    $wideLeft.children(\".thirdPartyLinks\").prependTo($linksSection)\n    $linksSection.prepend($selectRow);\n    $linksSection.prependTo($wideLeft)\n\n    $albumBoxes.append($albumBoxRating, $albumBoxInfo);\n    $albumCover.wrap(\"<div class='Hero__cover'>\");\n    $albumDetails.append($albumHeadline, $albumBoxes);\n\n    $root.append($albumDetails);\n  }\n\n  $root.replaceClass(\"*\", \"Hero\");\n})\n\n// @ts-ignore\n$(\".albumButton\").contents().filter(function () {\n  // @ts-ignore\n  return this.nodeType === 3 && this.textContent.trim();\n}).wrap(\"<span></span>\");\n\nObserver(\".yourRatingContainer .content\", function () {\n  const $root = $(this);\n  const $userButtons = $root.children(`div[style=\"float:right;\"]`).addClass(\"userAreaButtons\").removeAttr(\"style\")\n  const $ratingTextBoxContainer = $root.children(`.ratingTextBoxContainer`);\n\n  $userButtons\n    .add($ratingTextBoxContainer)\n    .wrapAll(\"<div class='userArea'></div>\");\n\n  $ratingTextBoxContainer.children(\"#ratingContainer\").unpack();\n  $ratingTextBoxContainer.unpack();\n  $root.unpack()\n}, { live: true })\n\nObserver(\".yourRatingContainer\", function () {\n  const $root = $(this);\n\n  const $userArea = $root.children(\".userArea\")\n\n  const $currentRatingBlock = $userArea.children(\"#currentRatingBlock\")\n  const $ratingBlock = $userArea.children(\"#ratingBlock\");\n\n  const $userRating = $(\"<div class='userRating'></div>\")\n\n  $userRating.append($currentRatingBlock, $ratingBlock)\n  $userArea.prepend($userRating)\n\n  if ($currentRatingBlock.length) {\n    $ratingBlock.hide();\n  }\n})\n\n/* -------------------------\n  headings patch\n------------------------- */\nObserver(\".section\", function () {\n  const $section = $(this);\n\n  $section.children(\".sectionHeading\").each(function () {\n    $(this)\n      .children(\"i, h2, .viewAll, a\")\n      .wrapAll(\"<hgroup></hgroup>\");\n  });\n\n  $section.find(\".menuDropFloatRight\").each(function () {\n    const $menu = $(this);\n\n    const $headings = $section.children(\".sectionHeading\");\n    // @ts-ignore\n    const $headingsAbove = $headings.filter(function () {\n      return this.compareDocumentPosition($menu[0]) & Node.DOCUMENT_POSITION_FOLLOWING;\n    });\n\n    if (!$headingsAbove.length) return;\n\n    const $menuClone = $menu.clone(true, true);\n    log.debug($menuClone)\n\n    $headingsAbove.last().append($menuClone);\n\n    // $menu.remove();\n    $menu.hide();\n    log.debug($menu)\n  });\n});\n\n$(\"#sortDrop li\").each(function () {\n  const $li = $(this);\n\n  if ($li.find(\"button.criticSort\").length === 0) {\n    const text = $li.text().trim();\n\n    const $btn = $(`<button class='criticSort' year='2026' albumid='1537608' sort='highest'>${text}</button>`, {\n      disabled: $li.hasClass(\"current\")\n    });\n\n    $li.empty().append($btn);\n  }\n});\n\n/* -------------------------\n  dot drop menu patch\n------------------------- */\nimport type { Instance as PopperInstance } from '@popperjs/core';\nimport { createPopper } from '@popperjs/core';\n\nlet $activeMenu: JQuery<HTMLElement> | null = null;\nlet activePopper: PopperInstance | null = null;\n\nfunction closeMenu() {\n  if (!$activeMenu) return;\n\n  $activeMenu.removeClass(\"active\");\n  if (activePopper) {\n    activePopper.destroy();\n    activePopper = null;\n  }\n\n  $activeMenu = null;\n}\n\n$(\".dotDropMenuContainer, .menuDropSelected\").each(function () {\n  const $root = $(this);\n\n  if ($root.data(\"aotified\")) return;\n  $root.data(\"aotified\", true);\n\n  const isSortMenu = $root.hasClass(\"menuDropSelected\");\n\n  $root.on(\"click mouseenter mouseleave\", function (e) {\n    // prevent hovering (useless)\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  });\n\n  const $btn = isSortMenu\n    ? $root.children(\".menuDropSelectedText\")\n    : $root.children(\".dotDropMenuButton > button, .dotDropMenuButton, button\").first();\n\n  const $menu = $root.find(\".dotDropDown, ul\").first();\n  if (isSortMenu) $menu.addClass(\"dotDropDown\")\n\n  $menu.children().each(function () {\n    const $row = $(this);\n    if ($row.hasClass(\"row\")) {\n      $row.changeTag(\"li\");\n      $row.removeAttr(\"class\");\n    }\n  })\n\n  if (!$btn.length || !$menu.length) return;\n\n  $btn.on(\"click\", function (e) {\n    e.preventDefault();\n    e.stopImmediatePropagation();\n\n    if ($activeMenu && $activeMenu[0] === $menu[0]) {\n      closeMenu();\n      return;\n    }\n\n    closeMenu();\n\n    $menu.addClass(\"active\");\n\n    activePopper = createPopper($btn[0], $menu[0], {\n      placement: 'bottom-end',\n      modifiers: [\n        { name: 'offset', options: { offset: [0, 6] } },\n        { name: 'flip', options: { fallbackPlacements: ['top-end'] } },\n        { name: 'preventOverflow', options: { padding: 8 } },\n      ],\n    });\n\n    $activeMenu = $menu;\n  });\n\n  $menu.on(\"click\", e => e.stopPropagation());\n});\n\n$(document).on(\"click\", closeMenu);\n$(document).on(\"keydown\", e => { if (e.key === \"Escape\") closeMenu(); });\n\n/* -------------------------\n  icons instead of text\n------------------------- */\nObserver(\".viewAll\", function () {\n  const $root = $(this);\n  const $a = $root.children(\"a\")\n\n  if ($a.text().startsWith(\"Add\")) {\n    $a.empty();\n    $a.append($(\"<i class='fas fa-plus'></i>\"));\n  }\n})\n\n/* -------------------------\n  artist page\n------------------------- */\n$(\"#centerContent.artist\").each(function () {\n  const $fullWidth = $(\".fullWidth\").first();\n  const $header = $fullWidth.children(\".Hero\");\n\n  if (!$fullWidth.length || !$header.length) return;\n  if ($fullWidth.children(\".artistContent\").length) return;\n\n  const $artistContent = $(\"<div>\", { class: \"artistContent\" });\n\n  let $node = $header.next();\n  while ($node.length) {\n    const $next = $node.next();\n    $artistContent.append($node);\n    $node = $next;\n  }\n\n  $fullWidth.append($artistContent);\n});\n\nObserver(\n  \"#albumOutput\",\n  function () {\n    const $root = $(this);\n\n    let $section: JQuery | null = null;\n    let $header: JQuery | null = null;\n    let $block: JQuery | null = null;\n\n    $root.children().each(function () {\n      const $el = $(this);\n\n      if ($el.hasClass(\"subHeadline\")) {\n        $section = $(\"<div>\", { class: \"releaseContainer\" });\n        $header = $(\"<div>\", { class: \"releaseHeader\" });\n        $block = $(\"<div>\", { class: \"releaseBlock\" });\n\n        $section.insertBefore($el);\n        $section.append($header, $block);\n        $header.append($el);\n        return;\n      }\n\n      if (!$section || !$header || !$block) return;\n\n      if ($el.hasClass(\"listenRow\")) {\n        $header.append($el);\n        return;\n      }\n\n      if ($el.hasClass(\"albumBlock\")) {\n        $el.addClass(\"slim\");\n        $block.append($el);\n      }\n    });\n  },\n  { once: true }\n);\n\nObserver(\n  \"#facetContent #toggleSearch\",\n  function () {\n    const $filterRow = $(\".artistContent > .filterRow.buttons\");\n    const $toggleSearch = $(\"#facetContent > #toggleSearch\");\n\n    if (!$filterRow.length || !$toggleSearch.length) return;\n\n    $toggleSearch.after($filterRow);\n  },\n  { once: true }\n);\n\nObserver(\n  \".fullWidth\",\n  function () {\n    const $root = $(this);\n    if ($root.children(\".artistFooter\").length) return;\n\n    const $mediaList = $root.find(\".artistContent .section.mediaList\");\n    const $relatedArtists = $root.find(\n      \".artistContent .section.relatedArtists\"\n    );\n\n    const $footer = $(\"<div>\", { class: \"artistFooter\" });\n\n    if ($mediaList.length) $footer.append($mediaList);\n    if ($relatedArtists.length) $footer.append($relatedArtists);\n\n    $root.append($footer);\n  },\n  { once: true }\n);\n\n\nObserver(\".relatedArtists\", function () {\n  const $root = $(this);\n  if ($root.children(\".artistsBlock\").length) return;\n\n  const $artistBlocks = $root.find(\".artistBlock\");\n  if (!$artistBlocks.length) return;\n\n  const $artistsBlock = $(\"<div>\", { class: \"artistsBlock\" });\n\n  $artistBlocks.each(function () {\n    $artistsBlock.append(this);\n  });\n\n  $root.append($artistsBlock);\n});\n\n/* -------------------------\n  album wrapping\n------------------------- */\nObserver(\n  \".anticipatedHome, .mobileScroll, #homeNewReleases, .section .mobileScroll\",\n  function () {\n    const $root = $(this);\n    const count = $root.find(\".albumBlock\").length;\n    $root.addClass(\"releaseBlock\").addClass(`count-${count}`);\n  }\n);\n\nObserver(\n  \".wideLeft\",\n  function () {\n    const $root = $(this);\n    if ($root.children(\".releaseBlock\").length) return;\n\n    requestAnimationFrame(() => {\n      const $albums = $root.children(\".albumBlock\");\n      if (!$albums.length) return;\n      if ($root.find(\".sectionHeading\").length) return;\n\n      $(\"<div>\", { class: \"releaseBlock large\" })\n        .insertBefore($albums.first())\n        .append($albums);\n    });\n  },\n  { once: true }\n);\n\nObserver(\n  \"#homeNewReleases .albumBlock, #albumOutput .albumBlock\",\n  function () {\n    $(this).addClass(\"slim\");\n  }\n);\n\nObserver(\".ratingRow\", function () {\n  if ($(this).children(\".ratingTextWrapper\").length) return;\n\n  const $texts = $(this).children(\".ratingText\");\n  if ($texts.length < 2) return;\n\n  $(\"<div/>\", { class: \"ratingTextWrapper\" })\n    .append($texts)\n    .appendTo(this);\n});\n\nObserver(\"section\", function () {\n  if (\n    $(this).find('.sectionHeading h2 a[href=\"/recently-added/\"]').length\n  ) {\n    $(this).attr(\"id\", \"recentlyAdded\");\n  }\n});\n\nObserver(\n  \".albumCriticScoreBox, .albumUserScoreBox, .artistUserScoreBox, .artistCriticScoreBox\",\n  function () {\n    const $box = $(this);\n    if ($box.children(\".ratingValue\").length) return;\n\n    // wrappers\n    const $ratingDetails = $(\"<div class='ratingDetails'>\");\n    const $ratingValue = $(\"<div class='ratingValue'>\");\n\n    // move details FIRST (sibling)\n    $ratingDetails.prepend($box.children(\".text\"));\n    $box.prepend($ratingDetails);\n    $box.prepend($ratingValue);\n\n    // heading\n    $ratingValue.append($box.children(\".heading\"));\n\n    // removing\n    $box.find(`[itemprop=\"aggregateRating\"]`).unpack();\n\n    // score block\n    const $ratingItem = $box.children(\n      \".albumCriticScore, .albumUserScore, .artistUserScore, .artistCriticScore\"\n    );\n\n    $ratingItem\n      .addClass(\"ratingItem\")\n      .removeAttr(\"style\")\n      .removeClass(\"albumCriticScore albumUserScore artistUserScore artistCriticScore\");\n\n    // extract score\n    let score = \"NR\";\n\n    const $rv = $ratingItem.find('[itemprop=\"ratingValue\"]');\n    const $rawScore = $rv.find(`a[href=\"#users\"]`)\n\n    if ($rawScore.length) {\n      score = String($rawScore.attr('title'))\n    } else {\n      if ($rv.length) {\n        score = $rv.text().trim();\n      } else {\n        const raw = $ratingItem.text().trim();\n        if (!isNaN(Number(raw))) score = raw;\n      }\n    }\n\n    log.debug(score)\n    $rv.remove();\n\n    // cleanup inner\n    $box.find(\"meta, #moreStatsLink\").remove();\n    $ratingItem.children(\"a[href='#users'], a[href='#critics']\").remove();\n\n    // remove floating text nodes\n    $ratingItem\n      .contents()\n      .filter((_, node) => node.nodeType === Node.TEXT_NODE)\n      .remove();\n\n    // build final ratingItem\n    const $score = $(\"<div>\", { id: \"score\", text: score });\n    const $bar = $box.children(\".ratingBar\");\n\n    $ratingItem.prepend($score);\n    $ratingItem.append($bar);\n\n    $ratingValue.append($ratingItem);\n\n    // inner texts patches\n    $box.find(\".text\").each(function () {\n      const $text = $(this);\n\n      function findNode(predicate: (node: Text) => boolean) {\n        // @ts-ignore\n        return $text.contents().filter(function () {\n          return (\n            this.nodeType === 3 &&\n            this.nodeValue &&\n            predicate(this as Text)\n          );\n        });\n      }\n\n      // \"2015 / All Time\" rating (only for user score box)\n      if ($text.hasClass(\"gray\") && $box.hasClass(\"albumUserScoreBox\")) {\n        $text.replaceClass(\"gray\", \"rows\")\n\n        // @ts-ignore\n        const firstText = findNode(node => node.nodeValue!.trim()).first();\n        const firstStrong = $text.children(\"strong\").first();\n\n        if (firstText.length && firstStrong.length) {\n          firstText.add(firstStrong).wrapAll(\"<span></span>\");\n        }\n\n        const $inner = $text.children(\"span[style]\");\n        $inner.removeAttr(\"style\");\n      }\n\n      $ratingDetails.append($text);\n    });\n  },\n  { live: true }\n);\n\n$(\".ratingDetails .text\").each(function () {\n  const $textDiv = $(this);\n\n  let html = $textDiv.html().replace(/\\u00A0/g, ' ');\n  const match = html.match(/^(Based on)\\s*(.*)$/);\n\n  if (match) {\n    const part1 = match[1];\n    const part2 = match[2];\n\n    $textDiv.addClass(\"numReviews\")\n    $textDiv.html(`<span>${part1}</span> <b>${part2}</b>`);\n  }\n});\n\n$(\".numReviews\").each(function () {\n  const $textDiv = $(this);\n  const $parent = $textDiv.parent();\n\n  $parent.prepend($textDiv);\n});\n\nObserver(\".facetContent\", function () {\n  const $root = $(this);\n  console.debug(\"Observer triggered\");\n\n  const $albums = $root.children(\".albumBlock\");\n\n  if ($albums.length) {\n    let $albumOutput = $root.children(\"#albumOutput\");\n\n    if (!$albumOutput.length) {\n      $albumOutput = $(\"<div id='albumOutput'></div>\");\n      $albums.first().before($albumOutput);\n    }\n\n    $albums.appendTo($albumOutput);\n  }\n}, { live: true });\n\nObserver(\"#facetContent:has(> .subHeadline)\", function () {\n  const $root = $(this);\n  const $releaseContainer = $(\"<div class='releaseContainer'></div>\");\n\n  const $releaseBlock = $root\n    .children(\"#albumOutput\")\n    .addClass(\"releaseBlock\")\n    .removeAttr(\"id\");\n\n  const $releaseHeaderItems = $root.children(\n    \".subHeadline, .listenRow.artist\"\n  );\n\n  if ($releaseHeaderItems.length) {\n    $releaseHeaderItems.wrapAll(\"<div class='releaseHeader'></div>\");\n  }\n\n  const $releaseHeader = $root.children(\".releaseHeader\");\n\n  if ($releaseBlock.length || $releaseHeader.length) {\n    $releaseContainer.append($releaseHeader, $releaseBlock);\n    $root.append($releaseContainer);\n  }\n\n  $releaseContainer.wrap(\"<div id='albumOutput'></div>\");\n});\n\nObserver(\".artistFooter\", function () {\n  const $footer = $(this);\n  let hasLiveSection = false;\n\n  $footer.children(\".section\").each(function () {\n    const $section = $(this);\n\n    if ($section.hasClass(\"relatedArtists\")) {\n      if ($section.find(\".artistBlock\").length) hasLiveSection = true;\n      return;\n    }\n\n    if (!$section.find(\".noDisplay\").length) {\n      hasLiveSection = true;\n    }\n  });\n\n  if (!hasLiveSection) {\n    $footer.remove();\n  }\n});\n\nlog.debug(\"initialized\");", "/* =========================\n * SETTINGS\n * ========================= */\nexport class Settings {\n  schema: SettingsSchema = {};\n  \n  private key = \"__userscript_settings__\";\n  private cache: SettingsSchema;\n\n  constructor(modules: TModule[]) {\n    this.cache = this.load();\n\n    // init defaults\n    for (const mod of modules) {\n      if (!this.cache[mod.name]) {\n        this.cache[mod.name] = {};\n      }\n      const moduleCache = this.cache[mod.name]!;\n      for (const feature of mod.features) {\n        if (!(feature.name in moduleCache)) {\n          moduleCache[feature.name] = feature.default ?? false;\n        }\n      }\n    }\n\n    this.save();\n  }\n\n  private load(): SettingsSchema {\n    try {\n      return JSON.parse(localStorage.getItem(this.key) || \"{}\");\n    } catch {\n      return {};\n    }\n  }\n\n  private save() {\n    localStorage.setItem(this.key, JSON.stringify(this.cache));\n  }\n\n  isEnabled(module: string, feature: string): boolean {\n    return !!this.cache[module]?.[feature];\n  }\n\n  setEnabled(module: string, feature: string, value: boolean) {\n    this.cache[module] ??= {};\n    this.cache[module][feature] = value;\n    this.save();\n  }\n\n  toggle(module: string, feature: string) {\n    this.setEnabled(module, feature, !this.isEnabled(module, feature));\n  }\n\n  getModule(module: string) {\n    return this.cache[module] ?? {};\n  }\n}\n", "import { Logger } from \"./logger\";\nimport { Settings } from \"./settings\";\n\nexport class Feature implements TFeature {\n  name!: string;\n  description!: string;\n  default = false;\n  hidden = false;\n  requires?: string[];\n  cleanup?: CleanupFn;\n\n  run!: (ctx: FeatureContext) => void | CleanupFn;\n  toggle?: () => boolean;\n\n  module!: Module;\n\n  constructor(options?: Partial<Feature>) {\n    if (options) Object.assign(this, options);\n\n    // auto bind\n    const proto = Object.getPrototypeOf(this);\n    for (const key of Object.getOwnPropertyNames(proto)) {\n      const val = (this as any)[key];\n      if (typeof val === \"function\" && key !== \"constructor\") {\n        (this as any)[key] = val.bind(this);\n      }\n    }\n  }\n\n  shouldRun(): boolean {\n    if (this.toggle) return this.toggle();\n    return this.default;\n  }\n}\n\nexport class Module<F extends TFeature = Feature> implements TModule<F> {\n  name: string;\n  description: string;\n  features: F[] = [];\n  shared: Record<string, any> = {};\n  settings?: TSettings;\n\n  constructor(\n    options: { name: string; description: string },\n    sharedInit?: SharedInitializer\n  ) {\n    this.name = options.name;\n    this.description = options.description;\n\n    if (sharedInit) sharedInit(this.shared);\n  }\n\n  loadFeatures(features: F[]) {\n    this.features.push(...features);\n\n    for (const feature of features) {\n      feature.module = this;\n      feature.shared = this.shared;\n    }\n  }\n}\n\nexport class Composer<M extends TModule = Module> {\n  modules: M[];\n  settings: TSettings;\n\n  constructor(modules: M[]) {\n    this.modules = modules;\n    this.settings = new Settings(modules);\n\n    for (const module of this.modules) {\n      module.settings = this.settings;\n    }\n  }\n\n  start() {\n    for (const module of this.modules) {\n      this.startModule(module);\n    }\n  }\n\n  private startModule(module: M) {\n    const logger = new Logger(`Module:${module.name}`);\n\n    for (const feature of module.features) {\n      if (!feature.shouldRun?.()) {\n        logger.log(`feature \"${feature.name}\" skipped by toggle/default`);\n        continue;\n      }\n\n      try {\n        const ctx: FeatureContext = {\n          module: module,\n          feature: feature,\n          settings: this.settings,\n          logger: new Logger(`aotified.${module.name}/${feature.name}`),\n        };\n\n        const cleanup = feature.run(ctx);\n        if (typeof cleanup === \"function\") feature.cleanup = cleanup;\n      } catch (err) {\n        logger.error(`failed to start feature \"${feature.name}\"`, err);\n      }\n    }\n  }\n\n  disableFeature(moduleName: string, featureName: string) {\n    const module = this.modules.find((m) => m.name === moduleName);\n    const feature = module?.features.find((f) => f.name === featureName);\n    if (!feature) return;\n\n    feature.cleanup?.();\n    feature.cleanup = undefined;\n    this.settings.setEnabled(moduleName, featureName, false);\n  }\n\n  enableFeature(moduleName: string, featureName: string) {\n    this.settings.setEnabled(moduleName, featureName, true);\n    this.start();\n  }\n}\n", "export function normalizeContent(content: OverlayContent): string {\n  if (typeof content === \"string\") {\n    return content;\n  }\n\n  if ((content as any).jquery) {\n    return (content as JQuery).prop(\"outerHTML\");\n  }\n\n  if (content instanceof HTMLElement) {\n    return content.outerHTML;\n  }\n\n  throw new Error(\"unsupported content type\");\n}\n\nexport function positionMenu($btn: JQuery<HTMLElement>, $menu: JQuery<HTMLElement>) {\n  const rect = $btn[0].getBoundingClientRect()\n\n  $menu.css({\n    top: rect.bottom,\n    left: rect.right - ($menu.outerWidth() ?? 0),\n  })\n}", "export async function sleep(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport function parseDate(text: string) {\n  text = text.trim();\n\n  if (text === \"TBA\") return 0;\n\n  const date = Date.parse(text + \" 2025\");\n  return isNaN(date) ? 0 : date;\n}\n\nexport function getYTID(url: string) {\n  const regExp =\n    /(?:youtube\\.com\\/(?:.*v=|embed\\/)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/;\n  const match = url.match(regExp);\n  return match ? match[1] : null;\n}\n\nexport function uid(prefix: string) {\n  return `${prefix}-` + Math.random().toString(36).slice(2, 9);\n}", "import { parseDate } from \"./utils\";\n\nexport function sort(type: string, $root: JQuery<HTMLElement>) {\n  const $items = $root.children(\".albumBlock\");\n\n  const getValue = (el: HTMLElement) => {\n    const $el = $(el);\n\n    switch (type) {\n      case \"comments\":\n        return (\n          parseInt(\n            $el.find(\".comment_count\").first().text().replace(/,/g, \"\"),\n            10\n          ) || 0\n        );\n\n      case \"saved\":\n        return (\n          parseInt(\n            $el.find(\".comment_count\").last().text().replace(/,/g, \"\"),\n            10\n          ) || 0\n        );\n\n      case \"date\":\n      default:\n        return parseDate($el.find(\".type\").text());\n    }\n  };\n\n  const sorted = $items.get().sort((a, b) => getValue(b) - getValue(a));\n\n  $root.append(sorted);\n}\n", "/**\n * modules.global\n *\n * added: 1.0.0\n */\nimport { Module, Feature } from \"../core/composer\";\nimport { Observer } from \"../core/observer\";\nimport { positionMenu } from \"../utils/dom\";\n\nimport { sort } from \"../utils/sort\";\nimport { uid } from \"../utils/utils\";\n\nexport const Global = (): Module => {\n  const module = new Module({\n    name: \"Globals\",\n    description: \"Global website features such as seasonal elements.\",\n  });\n\n  module.loadFeatures([\n    new Feature({\n      name: \"Aotified\",\n      description: \"root code\",\n      default: true,\n      hidden: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`aotified initializing`);\n\n        $(\"body > span, body\").each(function () {\n          const $root = $(this);\n          if ($root.prop(\"tagName\") === \"SPAN\") $root.unpack();\n        });\n\n        Observer(\".ratingText\", function () {\n          $(this).text(function (_, text) {\n            return text.replace(\" score\", \"\");\n          });\n        });\n\n        Observer(\".overlay\", function () {\n          $(this).prependTo(\"body\");\n        })\n\n        Observer(\".overlay > .content\", function () {\n          const $content = $(this);\n\n          let $header = $content.children(\"header\");\n          if (!$header.length) {\n            $header = $(\"<header></header>\");\n            $content.prepend($header);\n          }\n\n          const $headerElements = $content.find(\".close, .subHeadline, .heading\");\n\n          $headerElements.each(function () {\n            $(this).appendTo($header);\n          });\n\n          const $section = $content.children(\"section\");\n          if (!$section.length) {\n            $content.children().not(\"header\").wrapAll(\"<section></section>\");\n            $content.find(\".center\").unpack()\n          }\n\n          $content.removeAttr(\"style\");\n          $content.find(\"br, .clear\").remove()\n\n          ctx.logger.info($content);\n        }, { once: false });\n\n        Observer(\".ratingRowContainer\", function () {\n          const $root = $(this);\n\n          if ($root.find(\".icon\").length) {\n            $root.addClass(\"user\")\n\n            const $ratingRow = $(this).find(\".ratingRow\")\n            $ratingRow.find(\"span:has(> .deleteRatingBlock)\").remove()\n\n            const $message = $root.children(\"div[id^='message']\")\n\n            if ($message) {\n              $message.unpack();\n              $root.find(\"div[id^='deleteRating']\").unpack()\n              $root.find(\"div[id^='insertRating']\").remove()\n            }\n\n            const $ratingIcons = $(\"<div class='ratingIcons'>\")\n            $ratingRow.find(\"a:has(.icon)\").appendTo($ratingIcons)\n            $root.append($ratingIcons);\n          }\n        })\n      },\n    }),\n\n    new Feature({\n      name: \"More Sorts\",\n      description: \"More sorting. Self-explanatory.\",\n      default: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        Observer(\n          \".anticipatedHome\",\n          function () {\n            const $root = $(this);\n            if ($root.find(\".filterRow\").length) return;\n\n            const $sort = $(`\n            <div class=\"filterRow\">\n              <div class=\"menuDropFloatRight albumSort\">\n                <div class=\"menuDropText\">Sort</div>\n                <ul class=\"menuDrop\">\n                  <li id=\"sort\" class=\"menuDropSelected\">\n                    <div class=\"menuDropSelectedText\">Release date</div>\n                    <ul>\n                      <li class=\"current\" data-sort=\"date\">Release date</li>\n                      <li data-sort=\"comments\">Comments</li>\n                      <li data-sort=\"saved\">Saved</li>\n                    </ul>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          `);\n\n            $sort.on(\"click\", \"li[data-sort]\", function (e) {\n              e.preventDefault();\n\n              const $item = $(this);\n              const type = $item.data(\"sort\");\n\n              $sort.find(\"li[data-sort]\").removeClass(\"current\");\n              $item.addClass(\"current\");\n              $sort.find(\".menuDropSelectedText\").text($item.text());\n\n              requestAnimationFrame(() => {\n                $(\".releaseBlock\").each(function () {\n                  sort(type, $(this));\n                });\n              });\n            });\n\n            $sort.insertAfter($root.find(\".sectionHeading\"));\n          },\n          { once: true }\n        );\n      },\n    }),\n\n    new Feature({\n      name: \"Wrap Ratings\",\n      description: \".\",\n      default: true,\n      hidden: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        return Observer(\n          \".artistCriticScoreBox, .artistUserScoreBox, .albumCriticScoreBox, .albumUserScoreBox\",\n          function () {\n            const $root = $(this);\n\n            let $ratingItem = $root.children(\".ratingItem\");\n\n            const $score = $root.children(\".artistCriticScore\").first().length\n              ? $root.children(\".artistCriticScore\")\n              : $root.children(\".artistUserScore\");\n\n            const $ratingBar = $root.children(\".ratingBar\");\n            const $text = $root.children(\".text\");\n\n            if (!$score.length || !$ratingBar.length || !$text.length) return;\n\n            if (!$ratingItem.length) {\n              $ratingItem = $(\"<div>\", { class: \"ratingItem\" });\n              $score.before($ratingItem);\n              $ratingItem.append($score, $ratingBar);\n            }\n\n            if (!$ratingItem.closest(\".ratingValue\").length) {\n              const $ratingValue = $(\"<div>\", { class: \"ratingValue\" });\n              $ratingItem.before($ratingValue);\n              $ratingValue.append($ratingItem, $text);\n            }\n          }\n        );\n      },\n    }),\n\n    new Feature({\n      name: \"Colorize Ratings\",\n      description: \".\",\n      default: true,\n      hidden: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        return Observer(\".ratingBlock, .ratingItem\", function () {\n          const $el = $(this);\n          const $bar = $el.find(\".ratingBar\");\n\n          if (!$bar.length) return;\n\n          $el.removeClass(\"green yellow red\");\n\n          if ($bar.hasClass(\"green\")) $el.addClass(\"green\");\n          else if ($bar.hasClass(\"yellow\")) $el.addClass(\"yellow\");\n          else if ($bar.hasClass(\"red\")) $el.addClass(\"red\");\n        });\n      },\n    }),\n\n    new Feature({\n      name: \"Show Logo\",\n      description: \"Show [aotified] logo near AOTY logo.\",\n      default: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        $(`body`).addClass(\"aotified\");\n\n        $(\".logoHead\").append(\n          $(\"<div>\", {\n            id: \"GOT_AOTIFIED\",\n            text: \"[aotified]\",\n            css: {\n              color: \"gray\",\n              marginLeft: \"5px\",\n            },\n          })\n        );\n      },\n    }),\n\n    new Feature({\n      name: \"Ambience\",\n      description: \"Ambience appearance.\",\n      default: true,\n      run: () => {\n        const $artwork = $(\".albumTopBox.cover img, .artistImage img\");\n        if (!$artwork.length) return;\n\n        const $bg = $artwork.clone();\n\n        const src = $bg.attr(\"src\");\n        if (src) {\n          $bg.attr(\n            \"src\",\n            src\n              .replace(\"https://cdn2.albumoftheyear.org/\", \"https://cdn.albumoftheyear.org/\")\n              .replace(/\\/\\d+x0/, \"\")\n          );\n        }\n\n        $bg.removeAttr(\"srcset\");\n\n        $bg.on(\"error\", () => {\n          $bg.attr(\"src\", $artwork.attr(\"src\")!);\n        });\n\n        const $wrapper = $(\"<div>\", { id: \"aotified-ambience\" }).append($bg);\n        $(\"body\").append($wrapper);\n      }\n    }),\n\n    new Feature({\n      name: \"Global Font\",\n      description: \"Global font styles.\",\n      default: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        $(\"<link>\", {\n          id: \"aotified-inter-font\",\n          rel: \"stylesheet\",\n          href: \"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\",\n        }).appendTo(\"head\");\n\n        $(\"<style>\", {\n          id: \"aotified-inter-style\",\n          text: `\n            code, pre, kbd, samp {\n              font-family: ui-monospace, SFMono-Regular, monospace !important;\n            }\n\n            *:not([class^=\"fa\"], [class*=\" fa\"], [class^=\"fa-\"], [class*=\"fal\"]) {\n              font-family: var(--zui-font-primary) !important;\n            }\n          `,\n        }).appendTo(\"head\");\n      },\n    }),\n\n    new Feature({\n      name: \"Seasonal\",\n      description: \"Enable seasonal appearance such as snow.\",\n      default: false,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        const $canvas = $(\"<canvas>\", { id: \"aotified-snow\" }).css({\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          pointerEvents: \"none\",\n          zIndex: 9999,\n        });\n\n        $(\"body\").append($canvas);\n\n        const canvas = $canvas[0] as HTMLCanvasElement;\n        const cnv_ctx = canvas.getContext(\"2d\");\n\n        function resize() {\n          canvas.width = window.innerWidth;\n          canvas.height = window.innerHeight;\n        }\n\n        resize();\n        $(window).on(\"resize\", resize);\n\n        const flakes = Array.from({ length: 120 }, () => ({\n          x: Math.random() * canvas.width,\n          y: Math.random() * canvas.height,\n          r: Math.random() * 2 + 0.5,\n          d: Math.random() * 0.6 + 0.2,\n        }));\n\n        function update() {\n          for (const f of flakes) {\n            f.y += f.d;\n            if (f.y > canvas.height) {\n              f.y = -10;\n              f.x = Math.random() * canvas.width;\n            }\n          }\n        }\n\n        function draw() {\n          if (!cnv_ctx) return ctx.logger.error(\"can't get canvas context.\");\n          cnv_ctx.clearRect(0, 0, canvas.width, canvas.height);\n          cnv_ctx.fillStyle = \"rgba(255,255,255,0.8)\";\n          cnv_ctx.beginPath();\n\n          for (const f of flakes) {\n            cnv_ctx.moveTo(f.x, f.y);\n            cnv_ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2);\n          }\n\n          cnv_ctx.fill();\n          update();\n          requestAnimationFrame(draw);\n        }\n\n        draw();\n      },\n    })\n  ])\n\n  return module;\n};\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor === UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor === UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "// Options hooks\nexport const DIFF = '__b';\nexport const RENDER = '__r';\nexport const DIFFED = 'diffed';\nexport const COMMIT = '__c';\nexport const SKIP_EFFECTS = '__s';\nexport const CATCH_ERROR = '__e';\n\n// VNode properties\nexport const COMPONENT = '__c';\nexport const CHILDREN = '__k';\nexport const PARENT = '__';\nexport const MASK = '__m';\n\n// Component properties\nexport const VNODE = '__v';\nexport const DIRTY = '__d';\nexport const BITS = '__g';\nexport const NEXT_STATE = '__s';\nexport const CHILD_DID_SUSPEND = '__c';\n", "import { DIRTY, BITS } from './constants';\n\nexport const VOID_ELEMENTS = /^(?:area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/;\n// oxlint-disable-next-line no-control-regex\nexport const UNSAFE_NAME = /[\\s\\n\\\\/='\"\\0<>]/;\nexport const NAMESPACE_REPLACE_REGEX = /^(xlink|xmlns|xml)([A-Z])/;\nexport const HTML_LOWER_CASE = /^(?:accessK|auto[A-Z]|cell|ch|col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|popoverT|readO|rowS|src[A-Z]|tabI|useM|item[A-Z])/;\nexport const SVG_CAMEL_CASE = /^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/;\n\n// Boolean DOM properties that translate to enumerated ('true'/'false') attributes\nexport const HTML_ENUMERATED = new Set(['draggable', 'spellcheck']);\n\nexport const COMPONENT_DIRTY_BIT = 1 << 3;\nexport function setDirty(component) {\n\tif (component[BITS] !== undefined) {\n\t\tcomponent[BITS] |= COMPONENT_DIRTY_BIT;\n\t} else {\n\t\tcomponent[DIRTY] = true;\n\t}\n}\n\nexport function unsetDirty(component) {\n\tif (component.__g !== undefined) {\n\t\tcomponent.__g &= ~COMPONENT_DIRTY_BIT;\n\t} else {\n\t\tcomponent[DIRTY] = false;\n\t}\n}\n\nexport function isDirty(component) {\n\tif (component.__g !== undefined) {\n\t\treturn (component.__g & COMPONENT_DIRTY_BIT) !== 0;\n\t}\n\treturn component[DIRTY] === true;\n}\n\n// DOM properties that should NOT have \"px\" added when numeric\nconst ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out = out + str.slice(last, i);\n\t\tout = out + ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out = out + str.slice(last, i);\n\treturn out;\n}\n\nexport let indent = (s, char) =>\n\tString(s).replace(/(\\n+)/g, '$1' + (char || '\\t'));\n\nexport let isLargeString = (s, length, ignoreLines) =>\n\tString(s).length > (length || 40) ||\n\t(!ignoreLines && String(s).indexOf('\\n') !== -1) ||\n\tString(s).indexOf('<') !== -1;\n\nconst JS_TO_CSS = {};\n\nconst IS_NON_DIMENSIONAL = new Set([\n\t'animation-iteration-count',\n\t'border-image-outset',\n\t'border-image-slice',\n\t'border-image-width',\n\t'box-flex',\n\t'box-flex-group',\n\t'box-ordinal-group',\n\t'column-count',\n\t'fill-opacity',\n\t'flex',\n\t'flex-grow',\n\t'flex-negative',\n\t'flex-order',\n\t'flex-positive',\n\t'flex-shrink',\n\t'flood-opacity',\n\t'font-weight',\n\t'grid-column',\n\t'grid-row',\n\t'line-clamp',\n\t'line-height',\n\t'opacity',\n\t'order',\n\t'orphans',\n\t'stop-opacity',\n\t'stroke-dasharray',\n\t'stroke-dashoffset',\n\t'stroke-miterlimit',\n\t'stroke-opacity',\n\t'stroke-width',\n\t'tab-size',\n\t'widows',\n\t'z-index',\n\t'zoom'\n]);\n\nconst CSS_REGEX = /[A-Z]/g;\n// Convert an Object style to a CSSText string\nexport function styleObjToCss(s) {\n\tlet str = '';\n\tfor (let prop in s) {\n\t\tlet val = s[prop];\n\t\tif (val != null && val !== '') {\n\t\t\tconst name =\n\t\t\t\tprop[0] == '-'\n\t\t\t\t\t? prop\n\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t  (JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\tlet suffix = ';';\n\t\t\tif (\n\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t// Exclude custom-attributes\n\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t!IS_NON_DIMENSIONAL.has(name)\n\t\t\t) {\n\t\t\t\tsuffix = 'px;';\n\t\t\t}\n\t\t\tstr = str + name + ':' + val + suffix;\n\t\t}\n\t}\n\treturn str || undefined;\n}\n\n/**\n * Get flattened children from the children prop\n * @param {Array} accumulator\n * @param {any} children A `props.children` opaque object.\n * @returns {Array} accumulator\n * @private\n */\nexport function getChildren(accumulator, children) {\n\tif (Array.isArray(children)) {\n\t\tchildren.reduce(getChildren, accumulator);\n\t} else if (children != null && children !== false) {\n\t\taccumulator.push(children);\n\t}\n\treturn accumulator;\n}\n\nfunction markAsDirty() {\n\tthis.__d = true;\n}\n\nexport function createComponent(vnode, context) {\n\treturn {\n\t\t__v: vnode,\n\t\tcontext,\n\t\tprops: vnode.props,\n\t\t// silently drop state updates\n\t\tsetState: markAsDirty,\n\t\tforceUpdate: markAsDirty,\n\t\t__d: true,\n\t\t// hooks\n\t\t// oxlint-disable-next-line no-new-array\n\t\t__h: new Array(0)\n\t};\n}\n\n// Necessary for createContext api. Setting this property will pass\n// the context value as `this.context` just for this component.\nexport function getContext(nodeName, context) {\n\tlet cxType = nodeName.contextType;\n\tlet provider = cxType && context[cxType.__c];\n\treturn cxType != null\n\t\t? provider\n\t\t\t? provider.props.value\n\t\t\t: cxType.__\n\t\t: context;\n}\n\n/**\n * @template T\n */\nexport class Deferred {\n\tconstructor() {\n\t\t/** @type {Promise<T>} */\n\t\tthis.promise = new Promise((resolve, reject) => {\n\t\t\tthis.resolve = resolve;\n\t\t\tthis.reject = reject;\n\t\t});\n\t}\n}\n", "import {\n\tencodeEntities,\n\tstyleObjToCss,\n\tUNSAFE_NAME,\n\tNAMESPACE_REPLACE_REGEX,\n\tHTML_LOWER_CASE,\n\tHTML_ENUMERATED,\n\tSVG_CAMEL_CASE,\n\tcreateComponent,\n\tsetDirty,\n\tunsetDirty,\n\tisDirty\n} from './lib/util.js';\nimport { options, h, Fragment } from 'preact';\nimport {\n\tCHILDREN,\n\tCOMMIT,\n\tCOMPONENT,\n\tDIFF,\n\tDIFFED,\n\tNEXT_STATE,\n\tPARENT,\n\tRENDER,\n\tSKIP_EFFECTS,\n\tVNODE,\n\tCATCH_ERROR\n} from './lib/constants.js';\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\nconst isArray = Array.isArray;\nconst assign = Object.assign;\nconst EMPTY_STR = '';\nconst BEGIN_SUSPENSE_DENOMINATOR = '<!--$s-->';\nconst END_SUSPENSE_DENOMINATOR = '<!--/$s-->';\n\n// Global state for the current render pass\nlet beforeDiff, afterDiff, renderHook, ummountHook;\n\n/**\n * Render Preact JSX + Components to an HTML string.\n * @param {VNode} vnode\tJSX Element / VNode to render\n * @param {Object} [context={}] Initial root context object\n * @param {RendererState} [_rendererState] for internal use\n * @returns {string} serialized HTML\n */\nexport function renderToString(vnode, context, _rendererState) {\n\t// Performance optimization: `renderToString` is synchronous and we\n\t// therefore don't execute any effects. To do that we pass an empty\n\t// array to `options._commit` (`__c`). But we can go one step further\n\t// and avoid a lot of dirty checks and allocations by setting\n\t// `options._skipEffects` (`__s`) too.\n\tconst previousSkipEffects = options[SKIP_EFFECTS];\n\toptions[SKIP_EFFECTS] = true;\n\n\t// store options hooks once before each synchronous render call\n\tbeforeDiff = options[DIFF];\n\tafterDiff = options[DIFFED];\n\trenderHook = options[RENDER];\n\tummountHook = options.unmount;\n\n\tconst parent = h(Fragment, null);\n\tparent[CHILDREN] = [vnode];\n\n\ttry {\n\t\tconst rendered = _renderToString(\n\t\t\tvnode,\n\t\t\tcontext || EMPTY_OBJ,\n\t\t\tfalse,\n\t\t\tundefined,\n\t\t\tparent,\n\t\t\tfalse,\n\t\t\t_rendererState\n\t\t);\n\n\t\tif (isArray(rendered)) {\n\t\t\treturn rendered.join(EMPTY_STR);\n\t\t}\n\t\treturn rendered;\n\t} catch (e) {\n\t\tif (e.then) {\n\t\t\tthrow new Error('Use \"renderToStringAsync\" for suspenseful rendering.');\n\t\t}\n\n\t\tthrow e;\n\t} finally {\n\t\t// options._commit, we don't schedule any effects in this library right now,\n\t\t// so we can pass an empty queue to this hook.\n\t\tif (options[COMMIT]) options[COMMIT](vnode, EMPTY_ARR);\n\t\toptions[SKIP_EFFECTS] = previousSkipEffects;\n\t\tEMPTY_ARR.length = 0;\n\t}\n}\n\n/**\n * Render Preact JSX + Components to an HTML string.\n * @param {VNode} vnode\tJSX Element / VNode to render\n * @param {Object} [context={}] Initial root context object\n * @returns {string} serialized HTML\n */\nexport async function renderToStringAsync(vnode, context) {\n\t// Performance optimization: `renderToString` is synchronous and we\n\t// therefore don't execute any effects. To do that we pass an empty\n\t// array to `options._commit` (`__c`). But we can go one step further\n\t// and avoid a lot of dirty checks and allocations by setting\n\t// `options._skipEffects` (`__s`) too.\n\tconst previousSkipEffects = options[SKIP_EFFECTS];\n\toptions[SKIP_EFFECTS] = true;\n\n\t// store options hooks once before each synchronous render call\n\tbeforeDiff = options[DIFF];\n\tafterDiff = options[DIFFED];\n\trenderHook = options[RENDER];\n\tummountHook = options.unmount;\n\n\tconst parent = h(Fragment, null);\n\tparent[CHILDREN] = [vnode];\n\n\ttry {\n\t\tconst rendered = await _renderToString(\n\t\t\tvnode,\n\t\t\tcontext || EMPTY_OBJ,\n\t\t\tfalse,\n\t\t\tundefined,\n\t\t\tparent,\n\t\t\ttrue,\n\t\t\tundefined\n\t\t);\n\n\t\tif (isArray(rendered)) {\n\t\t\tlet count = 0;\n\t\t\tlet resolved = rendered;\n\n\t\t\t// Resolving nested Promises with a maximum depth of 25\n\t\t\twhile (\n\t\t\t\tresolved.some(\n\t\t\t\t\t(element) => element && typeof element.then === 'function'\n\t\t\t\t) &&\n\t\t\t\tcount++ < 25\n\t\t\t) {\n\t\t\t\tresolved = (await Promise.all(resolved)).flat();\n\t\t\t}\n\n\t\t\treturn resolved.join(EMPTY_STR);\n\t\t}\n\n\t\treturn rendered;\n\t} finally {\n\t\t// options._commit, we don't schedule any effects in this library right now,\n\t\t// so we can pass an empty queue to this hook.\n\t\tif (options[COMMIT]) options[COMMIT](vnode, EMPTY_ARR);\n\t\toptions[SKIP_EFFECTS] = previousSkipEffects;\n\t\tEMPTY_ARR.length = 0;\n\t}\n}\n\n/**\n * @param {VNode} vnode\n * @param {Record<string, unknown>} context\n */\nfunction renderClassComponent(vnode, context) {\n\tlet type = /** @type {import(\"preact\").ComponentClass<typeof vnode.props>} */ (vnode.type);\n\n\tlet isMounting = true;\n\tlet c;\n\tif (vnode[COMPONENT]) {\n\t\tisMounting = false;\n\t\tc = vnode[COMPONENT];\n\t\tc.state = c[NEXT_STATE];\n\t} else {\n\t\tc = new type(vnode.props, context);\n\t}\n\n\tvnode[COMPONENT] = c;\n\tc[VNODE] = vnode;\n\n\tc.props = vnode.props;\n\tc.context = context;\n\n\t// Turn off stateful rendering\n\tsetDirty(c);\n\n\tif (c.state == null) c.state = EMPTY_OBJ;\n\n\tif (c[NEXT_STATE] == null) {\n\t\tc[NEXT_STATE] = c.state;\n\t}\n\n\tif (type.getDerivedStateFromProps) {\n\t\tc.state = assign(\n\t\t\t{},\n\t\t\tc.state,\n\t\t\ttype.getDerivedStateFromProps(c.props, c.state)\n\t\t);\n\t} else if (isMounting && c.componentWillMount) {\n\t\tc.componentWillMount();\n\n\t\t// If the user called setState in cWM we need to flush pending,\n\t\t// state updates. This is the same behaviour in React.\n\t\tc.state = c[NEXT_STATE] !== c.state ? c[NEXT_STATE] : c.state;\n\t} else if (!isMounting && c.componentWillUpdate) {\n\t\tc.componentWillUpdate();\n\t}\n\n\tif (renderHook) renderHook(vnode);\n\n\treturn c.render(c.props, c.state, context);\n}\n\n/**\n * Recursively render VNodes to HTML.\n * @param {VNode|any} vnode\n * @param {any} context\n * @param {boolean} isSvgMode\n * @param {any} selectValue\n * @param {VNode} parent\n * @param {boolean} asyncMode\n * @param {RendererState | undefined} [renderer]\n * @returns {string | Promise<string> | (string | Promise<string>)[]}\n */\nfunction _renderToString(\n\tvnode,\n\tcontext,\n\tisSvgMode,\n\tselectValue,\n\tparent,\n\tasyncMode,\n\trenderer\n) {\n\t// Ignore non-rendered VNodes/values\n\tif (\n\t\tvnode == null ||\n\t\tvnode === true ||\n\t\tvnode === false ||\n\t\tvnode === EMPTY_STR\n\t) {\n\t\treturn EMPTY_STR;\n\t}\n\n\tlet vnodeType = typeof vnode;\n\t// Text VNodes: escape as HTML\n\tif (vnodeType != 'object') {\n\t\tif (vnodeType == 'function') return EMPTY_STR;\n\t\treturn vnodeType == 'string' ? encodeEntities(vnode) : vnode + EMPTY_STR;\n\t}\n\n\t// Recurse into children / Arrays\n\tif (isArray(vnode)) {\n\t\tlet rendered = EMPTY_STR,\n\t\t\trenderArray;\n\t\tparent[CHILDREN] = vnode;\n\t\tconst vnodeLength = vnode.length;\n\t\tfor (let i = 0; i < vnodeLength; i++) {\n\t\t\tlet child = vnode[i];\n\t\t\tif (child == null || typeof child == 'boolean') continue;\n\n\t\t\tconst childRender = _renderToString(\n\t\t\t\tchild,\n\t\t\t\tcontext,\n\t\t\t\tisSvgMode,\n\t\t\t\tselectValue,\n\t\t\t\tparent,\n\t\t\t\tasyncMode,\n\t\t\t\trenderer\n\t\t\t);\n\n\t\t\tif (typeof childRender == 'string') {\n\t\t\t\trendered = rendered + childRender;\n\t\t\t} else {\n\t\t\t\tif (!renderArray) {\n\t\t\t\t\t// oxlint-disable-next-line no-new-array\n\t\t\t\t\trenderArray = new Array(vnodeLength);\n\t\t\t\t}\n\n\t\t\t\tif (rendered) renderArray.push(rendered);\n\n\t\t\t\trendered = EMPTY_STR;\n\n\t\t\t\tif (isArray(childRender)) {\n\t\t\t\t\trenderArray.push(...childRender);\n\t\t\t\t} else {\n\t\t\t\t\trenderArray.push(childRender);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (renderArray) {\n\t\t\tif (rendered) renderArray.push(rendered);\n\t\t\treturn renderArray;\n\t\t}\n\n\t\treturn rendered;\n\t}\n\n\t// VNodes have {constructor:undefined} to prevent JSON injection:\n\tif (vnode.constructor !== undefined) return EMPTY_STR;\n\n\tvnode[PARENT] = parent;\n\tif (beforeDiff) beforeDiff(vnode);\n\n\tlet type = vnode.type,\n\t\tprops = vnode.props;\n\n\t// Invoke rendering on Components\n\tif (typeof type == 'function') {\n\t\tlet cctx = context,\n\t\t\tcontextType,\n\t\t\trendered,\n\t\t\tcomponent;\n\t\tif (type === Fragment) {\n\t\t\t// Serialized precompiled JSX.\n\t\t\tif ('tpl' in props) {\n\t\t\t\tlet out = EMPTY_STR;\n\t\t\t\tfor (let i = 0; i < props.tpl.length; i++) {\n\t\t\t\t\tout = out + props.tpl[i];\n\n\t\t\t\t\tif (props.exprs && i < props.exprs.length) {\n\t\t\t\t\t\tconst value = props.exprs[i];\n\t\t\t\t\t\tif (value == null) continue;\n\n\t\t\t\t\t\t// Check if we're dealing with a vnode or an array of nodes\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof value == 'object' &&\n\t\t\t\t\t\t\t(value.constructor === undefined || isArray(value))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tout =\n\t\t\t\t\t\t\t\tout +\n\t\t\t\t\t\t\t\t_renderToString(\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\t\t\tvnode,\n\t\t\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Values are pre-escaped by the JSX transform\n\t\t\t\t\t\t\tout = out + value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t} else if ('UNSTABLE_comment' in props) {\n\t\t\t\t// Fragments are the least used components of core that's why\n\t\t\t\t// branching here for comments has the least effect on perf.\n\t\t\t\treturn '<!--' + encodeEntities(props.UNSTABLE_comment) + '-->';\n\t\t\t}\n\n\t\t\trendered = props.children;\n\t\t} else {\n\t\t\tcontextType = type.contextType;\n\t\t\tif (contextType != null) {\n\t\t\t\tlet provider = context[contextType.__c];\n\t\t\t\tcctx = provider ? provider.props.value : contextType.__;\n\t\t\t}\n\n\t\t\tlet isClassComponent =\n\t\t\t\ttype.prototype && typeof type.prototype.render == 'function';\n\t\t\tif (isClassComponent) {\n\t\t\t\trendered = /**#__NOINLINE__**/ renderClassComponent(vnode, cctx);\n\t\t\t\tcomponent = vnode[COMPONENT];\n\t\t\t} else {\n\t\t\t\tvnode[COMPONENT] = component = /**#__NOINLINE__**/ createComponent(\n\t\t\t\t\tvnode,\n\t\t\t\t\tcctx\n\t\t\t\t);\n\n\t\t\t\t// If a hook invokes setState() to invalidate the component during rendering,\n\t\t\t\t// re-render it up to 25 times to allow \"settling\" of memoized states.\n\t\t\t\t// Note:\n\t\t\t\t//   This will need to be updated for Preact 11 to use internal.flags rather than component._dirty:\n\t\t\t\t//   https://github.com/preactjs/preact/blob/d4ca6fdb19bc715e49fd144e69f7296b2f4daa40/src/diff/component.js#L35-L44\n\t\t\t\tlet count = 0;\n\t\t\t\twhile (isDirty(component) && count++ < 25) {\n\t\t\t\t\tunsetDirty(component);\n\n\t\t\t\t\tif (renderHook) renderHook(vnode);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\trendered = type.call(component, props, cctx);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tif (asyncMode && error && typeof error.then == 'function') {\n\t\t\t\t\t\t\tvnode._suspended = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tsetDirty(component);\n\t\t\t}\n\n\t\t\tif (component.getChildContext != null) {\n\t\t\t\tcontext = assign({}, context, component.getChildContext());\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tisClassComponent &&\n\t\t\t\toptions.errorBoundaries &&\n\t\t\t\t(type.getDerivedStateFromError || component.componentDidCatch)\n\t\t\t) {\n\t\t\t\t// When a component returns a Fragment node we flatten it in core, so we\n\t\t\t\t// need to mirror that logic here too\n\t\t\t\tlet isTopLevelFragment =\n\t\t\t\t\trendered != null &&\n\t\t\t\t\trendered.type === Fragment &&\n\t\t\t\t\trendered.key == null &&\n\t\t\t\t\trendered.props.tpl == null;\n\t\t\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\t\t\ttry {\n\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\trendered,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\trenderer\n\t\t\t\t\t);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (type.getDerivedStateFromError) {\n\t\t\t\t\t\tcomponent[NEXT_STATE] = type.getDerivedStateFromError(err);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (component.componentDidCatch) {\n\t\t\t\t\t\tcomponent.componentDidCatch(err, EMPTY_OBJ);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isDirty(component)) {\n\t\t\t\t\t\trendered = renderClassComponent(vnode, context);\n\t\t\t\t\t\tcomponent = vnode[COMPONENT];\n\n\t\t\t\t\t\tif (component.getChildContext != null) {\n\t\t\t\t\t\t\tcontext = assign({}, context, component.getChildContext());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet isTopLevelFragment =\n\t\t\t\t\t\t\trendered != null &&\n\t\t\t\t\t\t\trendered.type === Fragment &&\n\t\t\t\t\t\t\trendered.key == null &&\n\t\t\t\t\t\t\trendered.props.tpl == null;\n\t\t\t\t\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\t\trendered,\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\tvnode,\n\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn EMPTY_STR;\n\t\t\t\t} finally {\n\t\t\t\t\tif (afterDiff) afterDiff(vnode);\n\n\t\t\t\t\tif (ummountHook) ummountHook(vnode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// When a component returns a Fragment node we flatten it in core, so we\n\t\t// need to mirror that logic here too\n\t\tlet isTopLevelFragment =\n\t\t\trendered != null &&\n\t\t\trendered.type === Fragment &&\n\t\t\trendered.key == null &&\n\t\t\trendered.props.tpl == null;\n\t\trendered = isTopLevelFragment ? rendered.props.children : rendered;\n\n\t\ttry {\n\t\t\t// Recurse into children before invoking the after-diff hook\n\t\t\tconst str = _renderToString(\n\t\t\t\trendered,\n\t\t\t\tcontext,\n\t\t\t\tisSvgMode,\n\t\t\t\tselectValue,\n\t\t\t\tvnode,\n\t\t\t\tasyncMode,\n\t\t\t\trenderer\n\t\t\t);\n\n\t\t\tif (afterDiff) afterDiff(vnode);\n\t\t\t// when we are dealing with suspense we can't do this...\n\n\t\t\tif (options.unmount) options.unmount(vnode);\n\n\t\t\tif (vnode._suspended) {\n\t\t\t\tif (typeof str === 'string') {\n\t\t\t\t\treturn BEGIN_SUSPENSE_DENOMINATOR + str + END_SUSPENSE_DENOMINATOR;\n\t\t\t\t} else if (isArray(str)) {\n\t\t\t\t\tstr.unshift(BEGIN_SUSPENSE_DENOMINATOR);\n\t\t\t\t\tstr.push(END_SUSPENSE_DENOMINATOR);\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\n\t\t\t\treturn str.then(\n\t\t\t\t\t(resolved) =>\n\t\t\t\t\t\tBEGIN_SUSPENSE_DENOMINATOR + resolved + END_SUSPENSE_DENOMINATOR\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn str;\n\t\t} catch (error) {\n\t\t\tif (!asyncMode && renderer && renderer.onError) {\n\t\t\t\tconst onError = (error) => {\n\t\t\t\t\treturn renderer.onError(error, vnode, (child, parent) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\treturn _renderToString(\n\t\t\t\t\t\t\t\tchild,\n\t\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\t\t\tparent,\n\t\t\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\t\t\trenderer\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\treturn onError(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\tlet res = onError(error);\n\n\t\t\t\tif (res !== undefined) return res;\n\n\t\t\t\tlet errorHook = options[CATCH_ERROR];\n\t\t\t\tif (errorHook) errorHook(error, vnode);\n\t\t\t\treturn EMPTY_STR;\n\t\t\t}\n\n\t\t\tif (!asyncMode) throw error;\n\n\t\t\tif (!error || typeof error.then != 'function') throw error;\n\n\t\t\tconst renderNestedChildren = () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst result = _renderToString(\n\t\t\t\t\t\trendered,\n\t\t\t\t\t\tcontext,\n\t\t\t\t\t\tisSvgMode,\n\t\t\t\t\t\tselectValue,\n\t\t\t\t\t\tvnode,\n\t\t\t\t\t\tasyncMode,\n\t\t\t\t\t\trenderer\n\t\t\t\t\t);\n\t\t\t\t\treturn vnode._suspended\n\t\t\t\t\t\t? BEGIN_SUSPENSE_DENOMINATOR + result + END_SUSPENSE_DENOMINATOR\n\t\t\t\t\t\t: result;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (!e || typeof e.then != 'function') throw e;\n\n\t\t\t\t\treturn e.then(renderNestedChildren);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn error.then(renderNestedChildren);\n\t\t}\n\t}\n\n\t// Serialize Element VNodes to HTML\n\tlet s = '<' + type,\n\t\thtml = EMPTY_STR,\n\t\tchildren;\n\n\tfor (let name in props) {\n\t\tlet v = props[name];\n\t\tv = isSignal(v) ? v.value : v;\n\n\t\tif (typeof v == 'function' && name !== 'class' && name !== 'className') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tswitch (name) {\n\t\t\tcase 'children':\n\t\t\t\tchildren = v;\n\t\t\t\tcontinue;\n\n\t\t\t// VDOM-specific props\n\t\t\tcase 'key':\n\t\t\tcase 'ref':\n\t\t\tcase '__self':\n\t\t\tcase '__source':\n\t\t\t\tcontinue;\n\n\t\t\t// prefer for/class over htmlFor/className\n\t\t\tcase 'htmlFor':\n\t\t\t\tif ('for' in props) continue;\n\t\t\t\tname = 'for';\n\t\t\t\tbreak;\n\t\t\tcase 'className':\n\t\t\t\tif ('class' in props) continue;\n\t\t\t\tname = 'class';\n\t\t\t\tbreak;\n\n\t\t\t// Form element reflected properties\n\t\t\tcase 'defaultChecked':\n\t\t\t\tname = 'checked';\n\t\t\t\tbreak;\n\t\t\tcase 'defaultSelected':\n\t\t\t\tname = 'selected';\n\t\t\t\tbreak;\n\n\t\t\t// Special value attribute handling\n\t\t\tcase 'defaultValue':\n\t\t\tcase 'value':\n\t\t\t\tname = 'value';\n\t\t\t\tswitch (type) {\n\t\t\t\t\t// <textarea value=\"a&b\"> --> <textarea>a&amp;b</textarea>\n\t\t\t\t\tcase 'textarea':\n\t\t\t\t\t\tchildren = v;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t// <select value> is serialized as a selected attribute on the matching option child\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tselectValue = v;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t// Add a selected attribute to <option> if its value matches the parent <select> value\n\t\t\t\t\tcase 'option':\n\t\t\t\t\t\tif (selectValue == v && !('selected' in props)) {\n\t\t\t\t\t\t\ts = s + ' selected';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'dangerouslySetInnerHTML':\n\t\t\t\thtml = v && v.__html;\n\t\t\t\tcontinue;\n\n\t\t\t// serialize object styles to a CSS string\n\t\t\tcase 'style':\n\t\t\t\tif (typeof v === 'object') {\n\t\t\t\t\tv = styleObjToCss(v);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'acceptCharset':\n\t\t\t\tname = 'accept-charset';\n\t\t\t\tbreak;\n\t\t\tcase 'httpEquiv':\n\t\t\t\tname = 'http-equiv';\n\t\t\t\tbreak;\n\n\t\t\tdefault: {\n\t\t\t\tif (NAMESPACE_REPLACE_REGEX.test(name)) {\n\t\t\t\t\tname = name.replace(NAMESPACE_REPLACE_REGEX, '$1:$2').toLowerCase();\n\t\t\t\t} else if (UNSAFE_NAME.test(name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t} else if (\n\t\t\t\t\t(name[4] === '-' || HTML_ENUMERATED.has(name)) &&\n\t\t\t\t\tv != null\n\t\t\t\t) {\n\t\t\t\t\t// serialize boolean aria-xyz or enumerated attribute values as strings\n\t\t\t\t\tv = v + EMPTY_STR;\n\t\t\t\t} else if (isSvgMode) {\n\t\t\t\t\tif (SVG_CAMEL_CASE.test(name)) {\n\t\t\t\t\t\tname =\n\t\t\t\t\t\t\tname === 'panose1'\n\t\t\t\t\t\t\t\t? 'panose-1'\n\t\t\t\t\t\t\t\t: name.replace(/([A-Z])/g, '-$1').toLowerCase();\n\t\t\t\t\t}\n\t\t\t\t} else if (HTML_LOWER_CASE.test(name)) {\n\t\t\t\t\tname = name.toLowerCase();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// write this attribute to the buffer\n\t\tif (v != null && v !== false) {\n\t\t\tif (v === true || v === EMPTY_STR) {\n\t\t\t\ts = s + ' ' + name;\n\t\t\t} else {\n\t\t\t\ts =\n\t\t\t\t\ts +\n\t\t\t\t\t' ' +\n\t\t\t\t\tname +\n\t\t\t\t\t'=\"' +\n\t\t\t\t\t(typeof v == 'string' ? encodeEntities(v) : v + EMPTY_STR) +\n\t\t\t\t\t'\"';\n\t\t\t}\n\t\t}\n\t}\n\n\tif (UNSAFE_NAME.test(type)) {\n\t\t// this seems to performs a lot better than throwing\n\t\t// return '<!-- -->';\n\t\tthrow new Error(`${type} is not a valid HTML tag name in ${s}>`);\n\t}\n\n\tif (html) {\n\t\t// dangerouslySetInnerHTML defined this node's contents\n\t} else if (typeof children === 'string') {\n\t\t// single text child\n\t\thtml = encodeEntities(children);\n\t} else if (children != null && children !== false && children !== true) {\n\t\t// recurse into this element VNode's children\n\t\tlet childSvgMode =\n\t\t\ttype === 'svg' || (type !== 'foreignObject' && isSvgMode);\n\t\thtml = _renderToString(\n\t\t\tchildren,\n\t\t\tcontext,\n\t\t\tchildSvgMode,\n\t\t\tselectValue,\n\t\t\tvnode,\n\t\t\tasyncMode,\n\t\t\trenderer\n\t\t);\n\t}\n\n\tif (afterDiff) afterDiff(vnode);\n\n\tif (ummountHook) ummountHook(vnode);\n\n\t// Emit self-closing tag for empty void elements:\n\tif (!html && SELF_CLOSING.has(type)) {\n\t\treturn s + '/>';\n\t}\n\n\tconst endTag = '</' + type + '>';\n\tconst startTag = s + '>';\n\n\tif (isArray(html)) return [startTag, ...html, endTag];\n\telse if (typeof html != 'string') return [startTag, html, endTag];\n\treturn startTag + html + endTag;\n}\n\nconst SELF_CLOSING = new Set([\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n]);\n\nexport default renderToString;\nexport const render = renderToString;\nexport const renderToStaticMarkup = renderToString;\n\nfunction isSignal(x) {\n\treturn (\n\t\tx !== null &&\n\t\ttypeof x === 'object' &&\n\t\ttypeof x.peek === 'function' &&\n\t\t'value' in x\n\t);\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { h } from \"preact\";\nimport render from \"preact-render-to-string\";\nimport { normalizeContent } from \"../utils/dom\";\n\nexport function Overlay(options: OverlayProps): JQuery {\n  const html = normalizeContent(options.content);\n\n  const markup = render(\n    <div class=\"content\" id={options.id}>\n      <header>\n        <div class=\"close\">\n          <button class=\"overlayClose\">\n            <i class=\"far fa-times-circle\"></i>\n          </button>\n        </div>\n\n        <div class=\"heading\">\n          {options.heading.icon && (\n            <i class={\"fas fa-\" + options.heading.icon}></i>\n          )}\n          <span>{options.heading.label}</span>\n        </div>\n      </header>\n\n      <section dangerouslySetInnerHTML={{ __html: html }} />\n    </div>\n  );\n\n  const $overlay = $(\".overlay\");\n  $overlay.children().remove();\n\n  const $el = $(markup).hide();\n  $el.find(\".overlayClose\").on(\"click\", () => $el.remove());\n\n  $overlay.append($el);\n  return $el.show();\n}\n", "/**\n * modules.album\n *\n * added: 1.0.0\n */\nimport { Module, Feature } from \"../core/composer\";\nimport { Observer } from \"../core/observer\";\n\nimport { Overlay } from \"../components/Overlay\";\nimport { getYTID } from \"../utils/utils\";\n\nexport const Album = (): Module => {\n  const mod = new Module({\n    name: \"Albums\",\n    description: \"Album page related features.\",\n  });\n\n  const ALBUM_ID = location.pathname.match(/album\\/(\\d+)-/)?.[1];\n\n  if (ALBUM_ID) {\n    mod.loadFeatures([\n      new Feature({\n        name: \"Embedded Videos\",\n        description: \"Shows embedded video if available\",\n        default: true,\n        run: (ctx: FeatureContext) => {\n          ctx.logger.log(`enabled`);\n\n          let video_url: string | undefined;\n\n          Observer(\".album:has(.albumTopBox.cover.video)\", function () {\n            const $root = $(this);\n            const $link = $root.find(\n              \".albumLinksFlex a:has(.albumButton.youtube)\"\n            );\n            video_url = $link.attr(\"href\");\n\n            if (video_url) {\n              ctx.logger.log(`video: ${video_url}`);\n              const videoId = getYTID(video_url);\n\n              if (!videoId) {\n                alert(\"\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F YouTube \u0441\u0441\u044B\u043B\u043A\u0430\");\n                return;\n              }\n\n              const $iframe = $(\"<iframe>\", {\n                src: `https://www.youtube.com/embed/${videoId}`,\n                frameborder: 0,\n                allow:\n                  \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n                allowfullscreen: true,\n              });\n\n              $root.find(\".showImage\").on(\"click\", function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                Overlay({\n                  id: \"AOTIFIED_videoEmbed\",\n                  heading: { label: \"Video\", icon: \"camera\" },\n                  content: $iframe\n                });\n              });\n            }\n          });\n        },\n      }),\n\n      new Feature({\n        name: \"More Stats\",\n        description: \"Fix album page layout and ratings.\",\n        default: true,\n        run: (ctx: FeatureContext) => {\n          ctx.logger.log(`enabled`);\n\n          Observer(\n            \"#moreStats\",\n            async function () {\n              const $box = $(this);\n              $box.html(\"<div class='loader'/>\");\n\n              try {\n                const res = await fetch(\"/scripts/moreStatsAlbum.php\", {\n                  method: \"POST\",\n                  headers: {\n                    \"Content-Type\":\n                      \"application/x-www-form-urlencoded; charset=UTF-8\",\n                    \"X-Requested-With\": \"XMLHttpRequest\",\n                  },\n                  body: `albumID=${ALBUM_ID}`,\n                  credentials: \"same-origin\",\n                });\n\n                if (!res.ok) throw new Error(res.statusText);\n\n                $box.children(\"loading\").remove();\n                $box.html(await res.text());\n\n                ctx.logger.log(\"showStats initialized\");\n              } catch (err) {\n                ctx.logger.error(\"moreStats failed\", err);\n                $box.addClass(\"error\");\n              }\n            },\n            { once: true }\n          );\n        },\n      }),\n    ]);\n  }\n\n  return mod;\n};\n", "/**\n * modules.artist\n *\n * added: 1.0.0\n */\nimport { Module, Feature } from \"../core/composer\";\nimport { Observer } from \"../core/observer\";\n\nexport const Artist = (): Module => {\n  const mod = new Module({\n    name: \"Artists\",\n    description: \"Artist page related features.\",\n  });\n\n  const ARTIST_ID = location.pathname.match(/artist\\/(\\d+)-/)?.[1];\n\n  if (ARTIST_ID) {\n    mod.loadFeatures([\n      new Feature({\n        name: \"More Releases\",\n        description: \".\",\n        default: true,\n        hidden: true,\n        run: (ctx: FeatureContext) => {\n          ctx.logger.log(`enabled`);\n        }\n      })\n    ]);\n  }\n\n  return mod;\n};\n", "/**\n * modules.user\n *\n * added: 1.0.0\n */\nimport { Module, Feature } from \"../core/composer\";\nimport { Observer } from \"../core/observer\";\n\nexport const User = (): Module => {\n  const module = new Module({\n    name: \"Users\",\n    description: \"Users related settings.\",\n  });\n\n  const USERNAME = location.pathname.match(/^\\/user\\/([^/]+)\\/?$/)?.[1];\n  if (!USERNAME) {\n    return module;\n  }\n\n  $(\"#centerContent\").addClass(\"user\");\n\n  module.loadFeatures([\n    new Feature({\n      name: \"Wrap Profile\",\n      description: \".\",\n      default: true,\n      hidden: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        Observer(\".profileContent\", function () {\n          const $root = $(this);\n          if ($root.data(\"releaseWrapped\")) return;\n          $root.data(\"releaseWrapped\", true);\n\n          const $headings = $root\n            .children(\".sectionHeading\")\n            .not(\"#favSection .sectionHeading\");\n\n          $headings.each(function () {\n            const $heading = $(this);\n            const $releaseContainer = $(\"<div class='releaseContainer'>\");\n            const $releaseBlock = $(\"<div class='releaseBlock'>\");\n\n            $heading\n              .nextUntil(\".sectionHeading\", \".albumBlock\")\n              .addClass(\"user\")\n              .appendTo($releaseBlock);\n\n            if (!$releaseBlock.children().length) return;\n\n            $heading.wrap($releaseContainer);\n            $releaseBlock.insertAfter($heading);\n          });\n        });\n\n        Observer(\"#centerContent.user\", function () {\n          const $root = $(this);\n\n          const pfp = $(\".profileImage img\").attr(\"src\");\n          ctx.logger.debug(pfp);\n\n          const $profileLayout = $root.children(\".flexContainer\");\n          $profileLayout.removeClass(\"flexContainer\");\n          $profileLayout.addClass(\"profileLayout\");\n\n          const $profileSidebar = $profileLayout.children(\".rightContent\");\n          $profileSidebar.removeClass(\"rightContent\");\n          $profileSidebar.addClass(\"profileSidebar\");\n          $profileSidebar\n            .find(\".rightBox:has(.tag)\")\n            .wrapChildren(\".tag\", \"<div class='tagBlock'>\");\n          $profileSidebar\n            .find(`.rightBox:has(a[href^=\"/user/\"])`)\n            .wrapChildren(`a`, \"<div class='usersBlock'>\");\n\n          const $profileContent = $profileLayout.children(\".wideLeft\");\n          $profileContent.removeClass(\"wideLeft alignTop\");\n          $profileContent.addClass(\"profileContent\");\n\n          const $fullWidth = $root.children(\".fullWidth:has(> #profileHead)\");\n          const $profileHead = $fullWidth.children(\"#profileHead\");\n\n          const $profileInfo = $profileHead\n            .children(\".profileHeadLeft\")\n            .replaceClass(\"*\", \"rightBox profileInfo\");\n\n          const $profileStats = $profileHead\n            .children(\".profileHeadRight\")\n            .replaceClass(\"*\", \"rightBox profileStats\");\n          $profileStats.children(\".profileStatContainer\").replaceClass(\"*\", \"statsBlock\").wrapAll(\"<div class='statsContainer'></div>\")\n          $profileStats.prepend(`<h2 class=\"sectionHeading\">Stats</h2>`);\n\n          const $profileNav = $fullWidth.children(\".profileNav\");\n          $profileContent.prepend($profileNav);\n\n          const $profileText = $fullWidth.find(\".headline.profile\");\n          $profileText.each(function () {\n            const $span = $(this)\n              .children(\"span\")\n              .addClass(\"profileName\")\n              .removeAttr(\"style\");\n\n            const $donor = $(this).children(\".donor\");\n\n            if ($span.length && $donor.length) {\n              $span.append($donor);\n            }\n          });\n\n          $profileText.find(\".profileName\").each(function () {\n            const node = this.childNodes[0];\n            if (node && node.nodeType === 3) {\n              const span = document.createElement(\"span\");\n              span.className = \"nickname\";\n              span.textContent = node.textContent;\n              this.replaceChild(span, node);\n            }\n          });\n\n          $profileHead.unpack();\n          $fullWidth.unpack();\n\n          $profileSidebar.insertBefore($profileContent);\n          $profileSidebar.prepend($profileStats);\n          $profileSidebar.prepend($profileInfo);\n        });\n\n        Observer(\"#favBlock\", function () {\n          $(this).addClass(\"releaseBlock\");\n        });\n\n        Observer(\".profileContent\", function () {\n          const $root = $(this);\n\n          const $headings = $root.children(\".sectionHeading\");\n\n          $headings.each(function (_) {\n            const $heading = $(this);\n\n            const $releaseBlock = $(\"<div class='releaseBlock'>\");\n            const $releaseContainer = $(\"<div class='releaseContainer'>\");\n\n            $heading\n              .nextUntil(\".sectionHeading\", \".albumBlock\")\n              .addClass(\"user\")\n              .appendTo($releaseBlock);\n\n            $heading.wrapSmart($releaseContainer);\n            $releaseBlock.insertAfter($heading);\n          });\n        });\n      },\n    }),\n\n    new Feature({\n      name: \"Badges\",\n      description: \"Show custom badges under user names\",\n      default: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        Observer(\".profileSidebar\", function () {\n          const $root = $(this);\n          const $profileDetails = $root.find(\".profileHeadText\").replaceClass(\"*\", \"profileDetails\");\n          const $profileBadges = $(\"<div class='profileBadges'>\");\n          const now = new Date();\n\n          const memberSinceText = $root\n            .find(\"div:contains('Member since')\")\n            .first()\n            .text()\n            .trim()\n            .replace(\"StatsContributions\", \"\")\n            .replace(\"Member since \", \"\");\n\n          const memberDate = new Date(memberSinceText);\n          let years = now.getFullYear() - memberDate.getFullYear();\n\n          const hasHadAnniversary =\n            now.getMonth() > memberDate.getMonth() ||\n            (now.getMonth() === memberDate.getMonth() &&\n              now.getDate() >= memberDate.getDate());\n\n          if (!hasHadAnniversary) {\n            years--;\n          }\n\n          console.log(years);\n\n          const $yearBadge = $(\n            `<div class='badge year'><span id=\"year\">${years}</span><span>year</span></div>`\n          );\n          let $devBadge = $(`<div class='badge dev'><span>DEV</span></div>`);\n\n          if (USERNAME === \"woidzero\") {\n            $profileBadges.append($devBadge);\n          } else if (USERNAME === \"rob\") {\n            $devBadge = $(`<div class='badge dev'><span>AOTY</span></div>`);\n            $profileBadges.append($devBadge);\n          }\n\n          if (years > 0) {\n            $profileBadges.append($yearBadge);\n          }\n\n          $profileDetails.append($profileBadges);\n        });\n      },\n    }),\n  ]);\n\n  return module;\n};\n", "/**\n * modules.image\n *\n * added: 1.0.0\n */\nimport { Module, Feature } from \"../core/composer\";\nimport { Observer } from \"../core/observer\";\n\nexport const Images = (): Module => {\n  const module = new Module({\n    name: \"Images\",\n    description: \"Images related settings.\",\n  });\n\n  module.loadFeatures([\n    new Feature({\n      name: \"Upgrade Images\",\n      description: \".\",\n      default: true,\n      hidden: true,\n      run: (ctx: FeatureContext) => {\n        ctx.logger.log(`enabled`);\n\n        return Observer<JQuery<HTMLImageElement>>(\"img\", function () {\n          const $img = $(this);\n\n          if ($img.data(\"upgraded\")) return;\n          $img.data(\"upgraded\", true);\n\n          const SIZE = \"700\";\n          const src = $img.attr(\"src\");\n          if (!src) return;\n\n          // already upgraded or not matching pattern\n          if (!/\\/\\d+x0\\//.test(src) || src.includes(`${SIZE}x0`)) return;\n\n          const upgraded = src.replace(/\\/\\d+x0\\//, `/${SIZE}x0/`);\n\n          const preloader = new Image();\n          preloader.src = upgraded;\n\n          preloader.onload = () => {\n            $img.attr(\"src\", upgraded);\n            ctx.logger.debug(\"upgraded image:\", upgraded);\n          };\n\n          preloader.onerror = (e) => {\n            ctx.logger.warn(\"image upgrade failed:\", upgraded, e);\n          };\n        });\n      },\n    }),\n  ]);\n\n  return module;\n};\n", "import \"./core/plugins\";\nimport \"./core/bootstrap\";\n\nimport { Composer } from \"./core/composer\";\n\nimport { Global } from \"./modules/global\";\nimport { Album } from \"./modules/album\";\nimport { Artist } from \"./modules/artist\";\nimport { User } from \"./modules/user\";\nimport { Images } from \"./modules/images\";\n\nconst composer = new Composer([Global(), Album(), Artist(), User(), Images()]);\n\ncomposer.start();\n"],
  "mappings": "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",
  "names": ["$", "e", "_", "m", "i", "e", "sort", "a", "b", "name", "style", "x", "y", "window", "min", "max", "v", "toPaddingObject", "popperOffsets", "min", "max", "offset", "effect", "x", "y", "popper", "effect", "window", "hash", "x", "y", "x", "y", "clippingParents", "reference", "popperOffsets", "offset", "placements", "placement", "a", "b", "placements", "placement", "i", "_loop", "_i", "checks", "offset", "x", "y", "popperOffsets", "offset", "min", "max", "sort", "fn", "merged", "defaultModifiers", "createPopper", "reference", "popper", "options", "m", "fn", "state", "effect", "noopFn", "_", "$infoBox", "e", "$header", "$footer", "m", "f", "a", "b", "_", "$header", "e", "f", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "Fragment", "props", "children", "BaseComponent", "context", "this", "getDomSibling", "vnode", "childIndex", "__", "__i", "sibling", "__k", "length", "__e", "type", "updateParentDomPointers", "i", "child", "__c", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "options", "debounceRendering", "defer", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "depthSort", "shift", "__v", "__P", "assign", "diff", "__n", "namespaceURI", "__u", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "ref", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "constructor", "String", "createVNode", "isArray", "__b", "key", "findMatchingIndex", "unmount", "parentVNode", "parentNode", "insertBefore", "nodeType", "findMatchingIndex", "childVNode", "oldChildren", "skewedIndex", "remainingOldChildren", "x", "y", "childIndex", "key", "type", "oldVNode", "matched", "__u", "length", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "namespace", "useCapture", "lowerCaseName", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "slice", "l", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "this", "eventHandler", "_dispatched", "options", "event", "diff", "parentDom", "newVNode", "globalContext", "excessDomChildren", "commitQueue", "oldDom", "isHydrating", "refQueue", "tmp", "c", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "i", "renderHook", "count", "renderResult", "newType", "constructor", "__e", "__b", "outer", "props", "prototype", "render", "contextType", "__c", "__", "__E", "BaseComponent", "doRender", "sub", "state", "__n", "__d", "__h", "_sb", "__s", "getDerivedStateFromProps", "assign", "__v", "componentWillMount", "componentDidMount", "push", "componentWillReceiveProps", "shouldComponentUpdate", "__k", "some", "vnode", "componentWillUpdate", "componentDidUpdate", "context", "__P", "__r", "getChildContext", "getSnapshotBeforeUpdate", "Fragment", "cloneNode", "children", "diffChildren", "isArray", "base", "then", "MODE_HYDRATE", "nodeType", "nextSibling", "indexOf", "removeNode", "markAsForce", "diffElementNodes", "diffed", "forEach", "commitRoot", "root", "applyRef", "cb", "call", "node", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "EMPTY_OBJ", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "getDomSibling", "undefined", "ref", "hasRefUnmount", "current", "unmount", "parentVNode", "skipRemove", "r", "componentWillUnmount", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "DIFFED", "COMMIT", "SKIP_EFFECTS", "COMPONENT", "CHILDREN", "DIRTY", "NEXT_STATE", "UNSAFE_NAME", "NAMESPACE_REPLACE_REGEX", "HTML_LOWER_CASE", "SVG_CAMEL_CASE", "HTML_ENUMERATED", "Set", "setDirty", "component", "unsetDirty", "__g", "isDirty", "ENCODED_ENTITIES", "encodeEntities", "str", "length", "test", "last", "i", "out", "ch", "charCodeAt", "slice", "JS_TO_CSS", "IS_NON_DIMENSIONAL", "CSS_REGEX", "styleObjToCss", "s", "prop", "val", "name", "replace", "toLowerCase", "suffix", "startsWith", "has", "markAsDirty", "this", "__d", "createComponent", "vnode", "context", "__v", "props", "setState", "forceUpdate", "__h", "Array", "renderToStringAsync", "beforeDiff", "afterDiff", "renderHook", "ummountHook", "renderToStringAsync", "EMPTY_OBJ", "EMPTY_ARR", "isArray", "Array", "assign", "Object", "EMPTY_STR", "BEGIN_SUSPENSE_DENOMINATOR", "END_SUSPENSE_DENOMINATOR", "renderToString", "vnode", "context", "_rendererState", "previousSkipEffects", "options", "SKIP_EFFECTS", "beforeDiff", "afterDiff", "DIFFED", "renderHook", "ummountHook", "unmount", "parent", "h", "Fragment", "CHILDREN", "rendered", "_renderToString", "join", "e", "then", "Error", "COMMIT", "length", "renderClassComponent", "c", "type", "isMounting", "COMPONENT", "state", "NEXT_STATE", "props", "setDirty", "getDerivedStateFromProps", "componentWillMount", "componentWillUpdate", "render", "isSvgMode", "selectValue", "asyncMode", "renderer", "vnodeType", "encodeEntities", "renderArray", "vnodeLength", "i", "child", "j", "childRender", "push", "constructor", "contextType", "component", "cctx", "out", "tpl", "exprs", "value", "UNSTABLE_comment", "children", "provider", "__c", "__", "isClassComponent", "prototype", "createComponent", "count", "isDirty", "unsetDirty", "call", "error", "_suspended", "getChildContext", "errorBoundaries", "getDerivedStateFromError", "componentDidCatch", "key", "err", "str", "unshift", "resolved", "onError", "res", "errorHook", "renderNestedChildren", "result", "s", "html", "name", "v", "isSignal", "__html", "styleObjToCss", "NAMESPACE_REPLACE_REGEX", "test", "replace", "toLowerCase", "UNSAFE_NAME", "HTML_ENUMERATED", "has", "SVG_CAMEL_CASE", "HTML_LOWER_CASE", "SELF_CLOSING", "endTag", "startTag", "Set", "isSignal", "x", "peek", "vnodeId", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "defaultProps", "options", "B", "u", "$overlay", "e", "_", "e"]
}
